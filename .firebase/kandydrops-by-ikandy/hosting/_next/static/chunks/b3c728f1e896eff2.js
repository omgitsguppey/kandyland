(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68835,e=>{"use strict";var t=e.i(71645);e.i(36180);var s=e.i(98925),r=e.i(59141);function l(e=["active","scheduled"]){let[a,n]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[d,c]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let t,l=(0,s.collection)(r.db,"drops");t=e&&e.length>0?(0,s.query)(l,(0,s.where)("status","in",e),(0,s.orderBy)("validFrom","asc")):(0,s.query)(l,(0,s.orderBy)("validFrom","asc"));let a=(0,s.onSnapshot)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),n(t),o(!1)},e=>{console.error("Error fetching drops:",e),c("Failed to load drops."),o(!1)});return()=>a()},[JSON.stringify(e)]),{drops:a,loading:i,error:d}}e.s(["useDrops",()=>l])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},5264,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),l=e.i(22016),a=e.i(32341),n=e.i(68835),i=e.i(31278),o=e.i(71689),d=e.i(70756);let c=(0,e.i(75254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function h(){let e,h,u=(0,r.useSearchParams)().get("id"),{user:x,userProfile:m,loading:f}=(0,a.useAuth)(),{drops:b,loading:p}=(0,n.useDrops)(null),j=(0,r.useRouter)(),[w,g]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),N=f||p;return((0,s.useEffect)(()=>{if(!N){if(!x)return void j.push("/");if(!u)return;let e=b.find(e=>e.id===u);g(e||null),e&&m?.unlockedContent?.includes(e.id)?y(!0):y(!1)}},[u,x,m,b,N,j]),N)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 text-brand-pink animate-spin"})}):u&&w?v?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)(l.default,{href:"/dashboard/library",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[(0,t.jsx)(o.ArrowLeft,{className:"w-4 h-4"}),"Back to Library"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-brand-green/10 text-brand-green border border-brand-green/20 text-xs font-bold uppercase tracking-wider",children:[(0,t.jsx)(c,{className:"w-3 h-3"}),"Secure Environment"]})]}),(0,t.jsx)("div",{className:"glass-panel p-1 rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative",onContextMenu:e=>e.preventDefault(),children:(0,t.jsx)("div",{className:"relative aspect-video bg-black rounded-2xl overflow-hidden flex items-center justify-center",children:w.contentUrl?(e=w.fileMetadata?.type||"",h=w.contentUrl,e.startsWith("video/")||h.match(/\.(mp4|webm|ogg)$/i)?(0,t.jsxs)("video",{controls:!0,controlsList:"nodownload",className:"w-full h-full object-contain",poster:w.imageUrl,children:[(0,t.jsx)("source",{src:h,type:e||"video/mp4"}),"Your browser does not support the video tag."]}):e.startsWith("audio/")||h.match(/\.(mp3|wav)$/i)?(0,t.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 bg-gradient-to-br from-gray-900 to-black",children:[(0,t.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden mb-8 border-4 border-white/10 animate-[spin_10s_linear_infinite]",children:(0,t.jsx)("img",{src:w.imageUrl,alt:"Album Art",className:"w-full h-full object-cover"})}),(0,t.jsxs)("audio",{controls:!0,controlsList:"nodownload",className:"w-full max-w-md",children:[(0,t.jsx)("source",{src:h,type:e||"audio/mpeg"}),"Your browser does not support the audio element."]})]}):e.startsWith("image/")||h.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,t.jsx)("img",{src:h,alt:"Secure Content",className:"w-full h-full object-contain pointer-events-none select-none",draggable:!1}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(c,{className:"w-8 h-8 text-brand-cyan"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Ready to Download"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:"This content is available for direct download."}),(0,t.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"px-8 py-3 bg-brand-pink text-white font-bold rounded-full hover:bg-pink-600 transition-colors shadow-lg shadow-brand-pink/20",children:"Download File"})]})):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Content not available"})})}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:w.title}),(0,t.jsx)("p",{className:"text-gray-400 leading-relaxed max-w-2xl",children:w.description})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mb-6 border border-red-500/20",children:(0,t.jsx)(d.Lock,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-400 mb-8 max-w-md",children:"You do not own this drop. Please purchase it from the marketplace to unlock this content."}),(0,t.jsx)(l.default,{href:"/",className:"px-6 py-3 rounded-full bg-white text-black font-bold hover:bg-gray-200 transition-colors",children:"Go to Marketplace"})]}):(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Drop Not Found"}),(0,t.jsx)(l.default,{href:"/dashboard/library",className:"text-brand-pink hover:underline",children:"Back to Library"})]})}function u(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 text-brand-pink animate-spin"})}),children:(0,t.jsx)(h,{})})}e.s(["default",()=>u],5264)}]);