(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68835,e=>{"use strict";var t=e.i(71645);e.i(36180);var r=e.i(98925),s=e.i(59141);function a(e=["active","scheduled"]){let[l,n]=(0,t.useState)([]),[i,d]=(0,t.useState)(!0),[c,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let t,a=(0,r.collection)(s.db,"drops");t=e&&e.length>0?(0,r.query)(a,(0,r.where)("status","in",e),(0,r.orderBy)("validFrom","asc")):(0,r.query)(a,(0,r.orderBy)("validFrom","asc"));let l=(0,r.onSnapshot)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),n(t),d(!1)},e=>{console.error("Error fetching drops:",e),o("Failed to load drops."),d(!1)});return()=>l()},[JSON.stringify(e)]),{drops:l,loading:i,error:c}}e.s(["useDrops",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},5264,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(22016),l=e.i(32341),n=e.i(68835),i=e.i(31278),d=e.i(71689),c=e.i(70756);let o=(0,e.i(75254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function h(){let e=(0,s.useSearchParams)().get("id"),{user:h,userProfile:u,loading:x}=(0,l.useAuth)(),{drops:m,loading:f}=(0,n.useDrops)(null),b=(0,s.useRouter)(),[p,j]=(0,r.useState)(null),[v,g]=(0,r.useState)(!1),y=x||f;return((0,r.useEffect)(()=>{if(!y){if(!h)return void b.push("/");if(!e)return;let t=m.find(t=>t.id===e);j(t||null),t&&u?.unlockedContent?.includes(t.id)?g(!0):g(!1)}},[e,h,u,m,y,b]),y)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 text-brand-pink animate-spin"})}):e&&p?v?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)(a.default,{href:"/dashboard/library",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[(0,t.jsx)(d.ArrowLeft,{className:"w-4 h-4"}),"Back to Library"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-brand-green/10 text-brand-green border border-brand-green/20 text-xs font-bold uppercase tracking-wider",children:[(0,t.jsx)(o,{className:"w-3 h-3"}),"Secure Environment"]})]}),(0,t.jsx)("div",{className:"glass-panel p-1 rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative",onContextMenu:e=>e.preventDefault(),children:(0,t.jsx)("div",{className:"relative aspect-video bg-black rounded-2xl overflow-hidden",children:p.contentUrl?(0,t.jsx)("img",{src:p.contentUrl,alt:"Secure Content",className:"w-full h-full object-contain pointer-events-none select-none",draggable:!1}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Content not available"})})}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:p.title}),(0,t.jsx)("p",{className:"text-gray-400 leading-relaxed max-w-2xl",children:p.description})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mb-6 border border-red-500/20",children:(0,t.jsx)(c.Lock,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-400 mb-8 max-w-md",children:"You do not own this drop. Please purchase it from the marketplace to unlock this content."}),(0,t.jsx)(a.default,{href:"/",className:"px-6 py-3 rounded-full bg-white text-black font-bold hover:bg-gray-200 transition-colors",children:"Go to Marketplace"})]}):(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Drop Not Found"}),(0,t.jsx)(a.default,{href:"/dashboard/library",className:"text-brand-pink hover:underline",children:"Back to Library"})]})}function u(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 text-brand-pink animate-spin"})}),children:(0,t.jsx)(h,{})})}e.s(["default",()=>u],5264)}]);